# S3

## Lifecycle Rules

Works with **prefixes / suffixes** and **tags**.
- **Transition Actions:** Move to X after X time.
- **Expiration Actions:** Delete after X time. *Works with old versions, incomplete multi-part uploads.*


## Storage Class Analysis

**Analyze storage access patterns to determine the most cost-effective storage** class for your data on AWS S3.  
24h to 48h to start seeing data analysis. **Only for Standard to Standard IA**.

## Requester Pays Bucket

The **owner still pays for storage**, but the **requester pays for network**.  
In a standard bucket, owner pays for both.

## Event Notifications

**Trigger an event** when an object is created, removed...  
Needs IAM permissions if you want to push events to **SNS, Lambda or SQS**.  
You can also use **EventBridge** integration to apply better filters and redirect to other AWS services.

## S3 Performance

### Baseline bucket

S3 **scales to high request rates**. **Latency is about 100-200ms**.  
We can achieve **3500 modifications** and **5500 read** operations per second per prefix.  
There are **no limits to the number of prefixes** in a bucket.

### Optimize performance

- **Multipart upload**: Recommended for files > 100MB and required for files > 5GB *(Parallelize uploads)*
- **S3 Transfer Acceleration**

### S3 Byte-Range Fetches

**Parallelize GETs** by requesting specific bytes ranges.  
Used to **speed up downloads** and **retrieve only partial data**.


## S3 Select

Retrieve less data **using simple SQL filters**. S3 will filter data **server side**.  

## S3 Batch Operations

Perform **bulk operations on existing S3 objects**.  
*Use-case: Modify metadata, encrypt data, modify TAGs, copy objects, call lambda...*

## S3 Inventory

Get a **list of all objects**.  
*Typical pipeline: S3 Inventory -> S3 Select -> S3 Batch Operations*

## S3 Storage Lens

Analyze, optimize storage **accross an entire AWS Organization**.  
Discover anomalies, identify cost efficiencies, data protection, aggregate data...  
Can export data to an S3 bucket. **Dashboard:** With metrics, customizable.

### Metrics

Free contains around 28 usage metrics, advanced metrics are paid.  
CloudWatch metrics are paid. Prefix aggregation for metrics is paid.

- **Global Metrics:** StorageBytes, ObjectCount...
- **Cost-Optimization Metrics:** NonCurrentVesitonStorageBytes, IncompleteMultipartUploadStorageBytes...
- **Data-Protection Metrics:** MFADeleteEnabledBucketCount, VersioningEnabledBucketCount...
- **Access-Management Metrics:** ObjectOwnershipBucketOwnerEnforcesBucketCount...
- **Event Metrics:** EventNotificationEnabledBucketCount...
- **Performance Metrics:** TramsferAccelerationEnabledBucketCount...
- **Activity Metrics:** AllRequests, GetRequests, BytesDownloaded...
- **Detailed Status Code Metrics:** 200OKStatusCount, 403ForbiddenErrorCount...

